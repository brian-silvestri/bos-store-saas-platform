<div class="p-4 md:p-6 lg:p-8">
  <div class="mb-6 md:mb-8">
    <h1 class="text-2xl md:text-3xl font-bold text-[var(--neutral-text)] mb-2">Super Admin Dashboard</h1>
    <p class="text-sm md:text-base text-[var(--neutral-muted)]">Gestiona todos los tenants de tu SaaS</p>
  </div>

  <!-- Global Stats -->
  @if (stats()) {
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4 mb-6 md:mb-8">
      <div class="stat-card">
        <div class="stat-label">Total Tenants</div>
        <div class="stat-value">{{ stats()!.totalTenants }}</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Activos</div>
        <div class="stat-value text-green-600">{{ stats()!.activeTenants }}</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Inactivos</div>
        <div class="stat-value text-red-600">{{ stats()!.inactiveTenants }}</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Total Órdenes</div>
        <div class="stat-value">{{ stats()!.totalOrders }}</div>
      </div>
      <div class="stat-card col-span-2 md:col-span-1">
        <div class="stat-label">Revenue Total</div>
        <div class="stat-value text-sm md:text-base lg:text-lg">${{ stats()!.totalRevenue.toLocaleString() }}</div>
      </div>
    </div>
  }

  <!-- Tenants List/Table -->
  <div class="bg-[var(--surface)] rounded-xl shadow-sm overflow-hidden">
    <div class="px-4 md:px-6 py-3 md:py-4 border-b border-[var(--neutral-border)]">
      <h2 class="text-lg md:text-xl font-semibold text-[var(--neutral-text)]">Todos los Tenants</h2>
    </div>

    @if (loading()) {
      <div class="p-8 md:p-12 text-center text-[var(--neutral-muted)]">Cargando...</div>
    } @else if (tenants().length === 0) {
      <div class="p-8 md:p-12 text-center text-[var(--neutral-muted)]">No hay tenants registrados</div>
    } @else {

      <!-- Mobile Cards View -->
      <div class="block lg:hidden divide-y divide-[var(--neutral-border)]">
        @for (tenant of tenants(); track trackById($index, tenant)) {
          <div class="p-4 hover:bg-[var(--neutral-surface)] transition-colors">
            <!-- Header -->
            <div class="flex items-start justify-between mb-3">
              <div class="flex-1">
                <h3 class="font-semibold text-[var(--neutral-text)] mb-1">{{ tenant.name }}</h3>
                <code class="text-xs bg-[var(--neutral-surface)] px-2 py-1 rounded">{{ tenant.subdomain }}</code>
              </div>
              @if (tenant.isActive) {
                <span class="status-badge status-active ml-2">Activo</span>
              } @else {
                <span class="status-badge status-inactive ml-2">Inactivo</span>
              }
            </div>

            <!-- Owner Info -->
            <div class="mb-3 text-sm">
              <div class="text-[var(--neutral-text)]">{{ tenant.ownerName }}</div>
              <div class="text-xs text-[var(--neutral-muted)]">{{ tenant.ownerEmail }}</div>
            </div>

            <!-- Metrics Grid -->
            <div class="grid grid-cols-3 gap-2 mb-3 text-center">
              <div class="bg-[var(--neutral-surface)] rounded p-2">
                <div class="text-xs text-[var(--neutral-muted)] mb-1">Órdenes</div>
                <div class="font-semibold text-sm text-[var(--neutral-text)]">{{ tenant.metrics.totalOrders }}</div>
              </div>
              <div class="bg-[var(--neutral-surface)] rounded p-2">
                <div class="text-xs text-[var(--neutral-muted)] mb-1">Productos</div>
                <div class="font-semibold text-sm text-[var(--neutral-text)]">{{ tenant.metrics.totalProducts }}</div>
              </div>
              <div class="bg-[var(--neutral-surface)] rounded p-2">
                <div class="text-xs text-[var(--neutral-muted)] mb-1">Revenue</div>
                <div class="font-semibold text-xs text-[var(--neutral-text)]">{{ formatCurrency(tenant.metrics.totalRevenue) }}</div>
              </div>
            </div>

            <!-- Footer -->
            <div class="flex items-center justify-between pt-2 border-t border-[var(--neutral-border)]">
              <span class="text-xs text-[var(--neutral-muted)]">{{ formatDate(tenant.createdAt) }}</span>
              <button
                (click)="toggleTenantStatus(tenant.id)"
                class="toggle-btn text-sm px-3 py-1"
                [class.btn-danger]="tenant.isActive"
                [class.btn-success]="!tenant.isActive"
              >
                {{ tenant.isActive ? 'Desactivar' : 'Activar' }}
              </button>
            </div>
          </div>
        }
      </div>

      <!-- Desktop Table View -->
      <div class="hidden lg:block overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr class="bg-[var(--neutral-surface)] border-b border-[var(--neutral-border)]">
              <th class="px-6 py-4 text-left text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Negocio</th>
              <th class="px-6 py-4 text-left text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Owner</th>
              <th class="px-6 py-4 text-left text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Subdomain</th>
              <th class="px-6 py-4 text-center text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Órdenes</th>
              <th class="px-6 py-4 text-center text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Productos</th>
              <th class="px-6 py-4 text-right text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Revenue</th>
              <th class="px-6 py-4 text-center text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Fecha Registro</th>
              <th class="px-6 py-4 text-center text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Estado</th>
              <th class="px-6 py-4 text-right text-xs font-semibold text-[var(--neutral-muted)] uppercase tracking-wider">Acciones</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-[var(--neutral-border)]">
            @for (tenant of tenants(); track trackById($index, tenant)) {
              <tr class="hover:bg-[var(--neutral-surface)] transition-colors">
                <td class="px-6 py-4">
                  <div class="font-medium text-[var(--neutral-text)]">{{ tenant.name }}</div>
                </td>
                <td class="px-6 py-4">
                  <div class="text-sm text-[var(--neutral-text)]">{{ tenant.ownerName }}</div>
                  <div class="text-xs text-[var(--neutral-muted)]">{{ tenant.ownerEmail }}</div>
                </td>
                <td class="px-6 py-4">
                  <code class="text-xs bg-[var(--neutral-surface)] px-2 py-1 rounded">{{ tenant.subdomain }}</code>
                </td>
                <td class="px-6 py-4 text-center">
                  <span class="text-sm font-medium text-[var(--neutral-text)]">{{ tenant.metrics.totalOrders }}</span>
                </td>
                <td class="px-6 py-4 text-center">
                  <span class="text-sm font-medium text-[var(--neutral-text)]">{{ tenant.metrics.totalProducts }}</span>
                </td>
                <td class="px-6 py-4 text-right">
                  <span class="text-sm font-semibold text-[var(--neutral-text)]">{{ formatCurrency(tenant.metrics.totalRevenue) }}</span>
                </td>
                <td class="px-6 py-4 text-center">
                  <span class="text-xs text-[var(--neutral-muted)]">{{ formatDate(tenant.createdAt) }}</span>
                </td>
                <td class="px-6 py-4 text-center">
                  @if (tenant.isActive) {
                    <span class="status-badge status-active">Activo</span>
                  } @else {
                    <span class="status-badge status-inactive">Inactivo</span>
                  }
                </td>
                <td class="px-6 py-4 text-right">
                  <button
                    (click)="toggleTenantStatus(tenant.id)"
                    class="toggle-btn"
                    [class.btn-danger]="tenant.isActive"
                    [class.btn-success]="!tenant.isActive"
                  >
                    {{ tenant.isActive ? 'Desactivar' : 'Activar' }}
                  </button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </div>
</div>

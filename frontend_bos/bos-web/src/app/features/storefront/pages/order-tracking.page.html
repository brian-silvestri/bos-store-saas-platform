<ng-container *ngIf="order() as o">
  <section class="max-w-3xl mx-auto space-y-4">
    <div class="text-center space-y-1">
      <h1 class="text-3xl font-semibold text-[var(--neutral-text)]">Order Tracking</h1>
      <p class="text-sm text-[var(--neutral-muted)]">Track your order in real-time</p>
    </div>

    <div class="bg-[var(--surface)] border border-[var(--neutral-border)] rounded-2xl shadow-sm p-6 space-y-6">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-xs text-[var(--neutral-muted)]">Order Number</p>
          <p class="text-lg font-semibold text-[var(--neutral-text)]">{{ o.id }}</p>
        </div>
        <span class="px-3 py-1 rounded-full bg-[var(--neutral-border)] text-[var(--neutral-subtle)] text-xs font-semibold">
          {{ statusLabel }}
        </span>
      </div>

      <div class="border-b border-[var(--neutral-border)]"></div>

      <div class="grid md:grid-cols-[260px_1fr] gap-10">
        <div class="space-y-6">
          <div *ngFor="let step of steps; let last = last" class="relative flex gap-3 items-start">
            <div class="relative flex flex-col items-center">
              <div
                class="w-9 h-9 rounded-full border flex items-center justify-center"
                [class.bg-black]="isActive(step.key)"
                [class.border-black]="isActive(step.key)"
                [class.text-white]="isActive(step.key)"
                [class.border-[var(--neutral-border-strong)]]="!isActive(step.key)"
                [class.text-[var(--neutral-border-strong)]]="!isActive(step.key)"
              >
                <svg *ngIf="isActive(step.key)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m5 13 4 4L19 7" />
                </svg>
              </div>
              <div
                class="w-[2px] bg-[var(--neutral-border-strong)] flex-1"
                *ngIf="!last"
                style="min-height: 70px"
              ></div>
            </div>
            <div class="pt-1">
              <p class="font-semibold text-[var(--neutral-text)]">{{ step.title }}</p>
              <p class="text-xs text-[var(--neutral-muted)]">{{ step.subtitle }}</p>
            </div>
          </div>
        </div>

        <div class="space-y-4 text-sm text-[var(--neutral-text)]">
          <div class="flex items-center gap-3 bg-[var(--neutral-surface)] border border-[var(--neutral-border)] rounded-lg px-3 py-3">
            <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-[var(--surface)] border border-[var(--neutral-border)] text-[var(--neutral-subtle)]">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 21c-4.5-4.5-6-7.5-6-10a6 6 0 1 1 12 0c0 2.5-1.5 5.5-6 10Zm0-9.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" />
              </svg>
            </div>
            <div>
              <p class="text-xs text-[var(--neutral-muted)]">Delivery Method</p>
              <p class="font-semibold">
                {{ o.deliveryMethod === 'delivery' ? 'Standard Delivery' : 'Pickup in store' }}
              </p>
            </div>
          </div>

          <div class="flex items-center gap-3 bg-[var(--neutral-surface)] border border-[var(--neutral-border)] rounded-lg px-3 py-3">
            <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-[var(--surface)] border border-[var(--neutral-border)] text-[var(--neutral-subtle)]">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <rect x="3" y="6" width="18" height="12" rx="2" ry="2" />
                <path d="M3 10h18" />
              </svg>
            </div>
            <div>
              <p class="text-xs text-[var(--neutral-muted)]">Payment Method</p>
              <p class="font-semibold">
                {{
                  o.paymentMethod === 'transfer'
                    ? 'Transfer'
                    : o.paymentMethod === 'card'
                      ? 'Credit Card'
                      : 'Cash'
                }}
              </p>
            </div>
          </div>

          <button
            class="w-full border border-[var(--neutral-border)] rounded-lg px-4 py-3 text-left bg-[var(--surface)] hover:bg-[var(--neutral-surface)] flex items-center justify-between"
            (click)="toggleSummary()"
          >
            <div>
              <p class="text-xs text-[var(--neutral-muted)]">Order Summary</p>
              <p class="font-semibold text-[var(--neutral-text)]">
                Total: {{ o.currency }} {{ o.total }}
              </p>
            </div>
            <span class="text-sm text-[var(--neutral-muted)]">{{ showSummary ? 'Hide' : 'View' }}</span>
          </button>

          <div
            *ngIf="showSummary"
            class="p-3 rounded-lg bg-[var(--neutral-surface)] border border-[var(--neutral-border)] text-[var(--neutral-text)]"
          >
            <p class="font-semibold mb-1">Items</p>
            <p class="text-sm">{{ o.summary }}</p>
          </div>

          <div class="p-3 rounded-lg bg-[var(--neutral-surface-alt)] text-[var(--neutral-subtle)] text-xs border border-[var(--neutral-border)]">
            For questions, contact the business via WhatsApp
          </div>
        </div>
      </div>
    </div>

    <p class="text-xs text-center text-[var(--neutral-muted)]">
      This is a read-only tracking page. No account required.
    </p>
  </section>
</ng-container>
